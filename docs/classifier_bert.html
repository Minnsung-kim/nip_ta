<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>샘플 웹 사이트: 캡스톤 프로젝트</title>

  <meta property="description" itemprop="description" content="우리는 한 학기 과정의 핵심 내용을 실습을 통해서 다시한번 다지고 나갑니다."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2022-12-16"/>
  <meta property="article:created" itemprop="dateCreated" content="2022-12-16"/>
  <meta name="article:author" content="김민성"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="샘플 웹 사이트: 캡스톤 프로젝트"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="우리는 한 학기 과정의 핵심 내용을 실습을 통해서 다시한번 다지고 나갑니다."/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:site_name" content="샘플 웹 사이트"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="샘플 웹 사이트: 캡스톤 프로젝트"/>
  <meta property="twitter:description" content="우리는 한 학기 과정의 핵심 내용을 실습을 통해서 다시한번 다지고 나갑니다."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["캡스톤 프로젝트"]},{"type":"character","attributes":{},"value":["우리는 한 학기 과정의 핵심 내용을 실습을 통해서 다시한번 다지고 나갑니다.\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url","affiliation"]}},"value":[{"type":"character","attributes":{},"value":["김민성"]},{"type":"character","attributes":{},"value":["https://minnsung-kim.github.io"]},{"type":"character","attributes":{},"value":["명지대"]}]}]},{"type":"character","attributes":{},"value":["2022-12-16"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_depth"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  <!--radix_placeholder_navigation_in_header-->
  <meta name="distill:offset" content=""/>

  <script type="application/javascript">

    window.headroom_prevent_pin = false;

    window.document.addEventListener("DOMContentLoaded", function (event) {

      // initialize headroom for banner
      var header = $('header').get(0);
      var headerHeight = header.offsetHeight;
      var headroom = new Headroom(header, {
        tolerance: 5,
        onPin : function() {
          if (window.headroom_prevent_pin) {
            window.headroom_prevent_pin = false;
            headroom.unpin();
          }
        }
      });
      headroom.init();
      if(window.location.hash)
        headroom.unpin();
      $(header).addClass('headroom--transition');

      // offset scroll location for banner on hash change
      // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
      window.addEventListener("hashchange", function(event) {
        window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
      });

      // responsive menu
      $('.distill-site-header').each(function(i, val) {
        var topnav = $(this);
        var toggle = topnav.find('.nav-toggle');
        toggle.on('click', function() {
          topnav.toggleClass('responsive');
        });
      });

      // nav dropdowns
      $('.nav-dropbtn').click(function(e) {
        $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
        $(this).parent().siblings('.nav-dropdown')
           .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $("body").click(function(e){
        $('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $(".nav-dropdown").click(function(e){
        e.stopPropagation();
      });
    });
  </script>

  <style type="text/css">

  /* Theme (user-documented overrideables for nav appearance) */

  .distill-site-nav {
    color: rgba(255, 255, 255, 0.8);
    background-color: #0F2E3D;
    font-size: 15px;
    font-weight: 300;
  }

  .distill-site-nav a {
    color: inherit;
    text-decoration: none;
  }

  .distill-site-nav a:hover {
    color: white;
  }

  @media print {
    .distill-site-nav {
      display: none;
    }
  }

  .distill-site-header {

  }

  .distill-site-footer {

  }


  /* Site Header */

  .distill-site-header {
    width: 100%;
    box-sizing: border-box;
    z-index: 3;
  }

  .distill-site-header .nav-left {
    display: inline-block;
    margin-left: 8px;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header .nav-left {
      margin-left: 0;
    }
  }


  .distill-site-header .nav-right {
    float: right;
    margin-right: 8px;
  }

  .distill-site-header a,
  .distill-site-header .title {
    display: inline-block;
    text-align: center;
    padding: 14px 10px 14px 10px;
  }

  .distill-site-header .title {
    font-size: 18px;
    min-width: 150px;
  }

  .distill-site-header .logo {
    padding: 0;
  }

  .distill-site-header .logo img {
    display: none;
    max-height: 20px;
    width: auto;
    margin-bottom: -4px;
  }

  .distill-site-header .nav-image img {
    max-height: 18px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }



  @media screen and (min-width: 1000px) {
    .distill-site-header .logo img {
      display: inline-block;
    }
    .distill-site-header .nav-left {
      margin-left: 20px;
    }
    .distill-site-header .nav-right {
      margin-right: 20px;
    }
    .distill-site-header .title {
      padding-left: 12px;
    }
  }


  .distill-site-header .nav-toggle {
    display: none;
  }

  .nav-dropdown {
    display: inline-block;
    position: relative;
  }

  .nav-dropdown .nav-dropbtn {
    border: none;
    outline: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 16px 10px;
    background-color: transparent;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    margin: 0;
    margin-top: 1px;
    z-index: 2;
  }

  .nav-dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 200px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 4px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
    z-index: 1;
    margin-top: 2px;
    white-space: nowrap;
    padding-top: 4px;
    padding-bottom: 4px;
  }

  .nav-dropdown-content hr {
    margin-top: 4px;
    margin-bottom: 4px;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .nav-dropdown-active {
    display: block;
  }

  .nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
    color: black;
    padding: 6px 24px;
    text-decoration: none;
    display: block;
    text-align: left;
  }

  .nav-dropdown-content .nav-dropdown-header {
    display: block;
    padding: 5px 24px;
    padding-bottom: 0;
    text-transform: uppercase;
    font-size: 14px;
    color: #999999;
    white-space: nowrap;
  }

  .nav-dropdown:hover .nav-dropbtn {
    color: white;
  }

  .nav-dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }

  .nav-right .nav-dropdown-content {
    margin-left: -45%;
    right: 0;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
    .distill-site-header a.nav-toggle {
      float: right;
      display: block;
    }
    .distill-site-header .title {
      margin-left: 0;
    }
    .distill-site-header .nav-right {
      margin-right: 0;
    }
    .distill-site-header {
      overflow: hidden;
    }
    .nav-right .nav-dropdown-content {
      margin-left: 0;
    }
  }


  @media screen and (max-width: 768px) {
    .distill-site-header.responsive {position: relative; min-height: 500px; }
    .distill-site-header.responsive a.nav-toggle {
      position: absolute;
      right: 0;
      top: 0;
    }
    .distill-site-header.responsive a,
    .distill-site-header.responsive .nav-dropdown {
      display: block;
      text-align: left;
    }
    .distill-site-header.responsive .nav-left,
    .distill-site-header.responsive .nav-right {
      width: 100%;
    }
    .distill-site-header.responsive .nav-dropdown {float: none;}
    .distill-site-header.responsive .nav-dropdown-content {position: relative;}
    .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }

  /* Site Footer */

  .distill-site-footer {
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
    z-index: 3;
    margin-top: 30px;
    padding-top: 30px;
    padding-bottom: 30px;
    text-align: center;
  }

  /* Headroom */

  d-title {
    padding-top: 6rem;
  }

  @media print {
    d-title {
      padding-top: 4rem;
    }
  }

  .headroom {
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  }

  .headroom--transition {
    transition: all .4s ease-in-out;
  }

  .headroom--unpinned {
    top: -100px;
  }

  .headroom--pinned {
    top: 0;
  }

  /* adjust viewport for navbar height */
  /* helps vertically center bootstrap (non-distill) content */
  .min-vh-100 {
    min-height: calc(100vh - 100px) !important;
  }

  </style>

  <script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
  <link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
  <script src="site_libs/headroom-0.9.4/headroom.min.js"></script>
  <script src="site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
  <script src="site_libs/fuse-6.4.1/fuse.min.js"></script>

  <script type="application/javascript">

  function getMeta(metaName) {
    var metas = document.getElementsByTagName('meta');
    for (let i = 0; i < metas.length; i++) {
      if (metas[i].getAttribute('name') === metaName) {
        return metas[i].getAttribute('content');
      }
    }
    return '';
  }

  function offsetURL(url) {
    var offset = getMeta('distill:offset');
    return offset ? offset + '/' + url : url;
  }

  function createFuseIndex() {

    // create fuse index
    var options = {
      keys: [
        { name: 'title', weight: 20 },
        { name: 'categories', weight: 15 },
        { name: 'description', weight: 10 },
        { name: 'contents', weight: 5 },
      ],
      ignoreLocation: true,
      threshold: 0
    };
    var fuse = new window.Fuse([], options);

    // fetch the main search.json
    return fetch(offsetURL('search.json'))
      .then(function(response) {
        if (response.status == 200) {
          return response.json().then(function(json) {
            // index main articles
            json.articles.forEach(function(article) {
              fuse.add(article);
            });
            // download collections and index their articles
            return Promise.all(json.collections.map(function(collection) {
              return fetch(offsetURL(collection)).then(function(response) {
                if (response.status === 200) {
                  return response.json().then(function(articles) {
                    articles.forEach(function(article) {
                      fuse.add(article);
                    });
                  })
                } else {
                  return Promise.reject(
                    new Error('Unexpected status from search index request: ' +
                              response.status)
                  );
                }
              });
            })).then(function() {
              return fuse;
            });
          });

        } else {
          return Promise.reject(
            new Error('Unexpected status from search index request: ' +
                        response.status)
          );
        }
      });
  }

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // get search element (bail if we don't have one)
    var searchEl = window.document.getElementById('distill-search');
    if (!searchEl)
      return;

    createFuseIndex()
      .then(function(fuse) {

        // make search box visible
        searchEl.classList.remove('hidden');

        // initialize autocomplete
        var options = {
          autoselect: true,
          hint: false,
          minLength: 2,
        };
        window.autocomplete(searchEl, options, [{
          source: function(query, callback) {
            const searchOptions = {
              isCaseSensitive: false,
              shouldSort: true,
              minMatchCharLength: 2,
              limit: 10,
            };
            var results = fuse.search(query, searchOptions);
            callback(results
              .map(function(result) { return result.item; })
            );
          },
          templates: {
            suggestion: function(suggestion) {
              var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
                ? `<img src="${offsetURL(suggestion.preview)}"</img>`
                : '';
              var html = `
                <div class="search-item">
                  <h3>${suggestion.title}</h3>
                  <div class="search-item-description">
                    ${suggestion.description || ''}
                  </div>
                  <div class="search-item-preview">
                    ${img}
                  </div>
                </div>
              `;
              return html;
            }
          }
        }]).on('autocomplete:selected', function(event, suggestion) {
          window.location.href = offsetURL(suggestion.path);
        });
        // remove inline display style on autocompleter (we want to
        // manage responsive display via css)
        $('.algolia-autocomplete').css("display", "");
      })
      .catch(function(error) {
        console.log(error);
      });

  });

  </script>

  <style type="text/css">

  .nav-search {
    font-size: x-small;
  }

  /* Algolioa Autocomplete */

  .algolia-autocomplete {
    display: inline-block;
    margin-left: 10px;
    vertical-align: sub;
    background-color: white;
    color: black;
    padding: 6px;
    padding-top: 8px;
    padding-bottom: 0;
    border-radius: 6px;
    border: 1px #0F2E3D solid;
    width: 180px;
  }


  @media screen and (max-width: 768px) {
    .distill-site-nav .algolia-autocomplete {
      display: none;
      visibility: hidden;
    }
    .distill-site-nav.responsive .algolia-autocomplete {
      display: inline-block;
      visibility: visible;
    }
    .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
      margin-left: 0;
      width: 400px;
      max-height: 400px;
    }
  }

  .algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
    width: 90%;
    outline: none;
    border: none;
  }

  .algolia-autocomplete .aa-hint {
    color: #999;
  }
  .algolia-autocomplete .aa-dropdown-menu {
    width: 550px;
    max-height: 70vh;
    overflow-x: visible;
    overflow-y: scroll;
    padding: 5px;
    margin-top: 3px;
    margin-left: -150px;
    background-color: #fff;
    border-radius: 5px;
    border: 1px solid #999;
    border-top: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
    cursor: pointer;
    padding: 5px 4px;
    border-bottom: 1px solid #eee;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
    border-bottom: none;
    margin-bottom: 2px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
    overflow: hidden;
    font-size: 0.8em;
    line-height: 1.4em;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
    font-size: 1rem;
    margin-block-start: 0;
    margin-block-end: 5px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
    display: inline-block;
    overflow: hidden;
    height: 2.8em;
    width: 80%;
    margin-right: 4%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
    display: inline-block;
    width: 15%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
    height: 3em;
    width: auto;
    display: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
    display: initial;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
    background-color: #eee;
  }
  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
    font-weight: bold;
    font-style: normal;
  }

  </style>


  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        if ($(this).children()[0].nodeName == "D-FOOTNOTE") {
          var fn = $(this).children()[0]
          $(this).html(fn.shadowRoot.querySelector("sup"))
          $(this).id = fn.id
          fn.remove()
        }
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          return "<p>" + $('#ref-' + ref).html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // fix footnotes in tables (#411)
      // replacing broken distill.pub feature
      $('table d-footnote').each(function() {
        // we replace internal showAtNode methode which is triggered when hovering a footnote
        this.hoverBox.showAtNode = function(node) {
          // ported from https://github.com/distillpub/template/pull/105/files
          calcOffset = function(elem) {
              let x = elem.offsetLeft;
              let y = elem.offsetTop;
              // Traverse upwards until an `absolute` element is found or `elem`
              // becomes null.
              while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                  x += elem.offsetLeft;
                  y += elem.offsetTop;
              }

              return { left: x, top: y };
          }
          // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
          const bbox = node.getBoundingClientRect();
          const offset = calcOffset(node);
          this.show([offset.left + bbox.width, offset.top + bbox.height]);
        }
      })

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      // ignore leaflet img layers (#106)
      figures = figures.filter(':not(img[class*="leaflet"])')
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <style type="text/css">
  /* base variables */

  /* Edit the CSS properties in this file to create a custom
     Distill theme. Only edit values in the right column
     for each row; values shown are the CSS defaults.
     To return any property to the default,
     you may set its value to: unset
     All rows must end with a semi-colon.                      */

  /* Optional: embed custom fonts here with `@import`          */
  /* This must remain at the top of this file.                 */



  html {
    /*-- Main font sizes --*/
    --title-size:      50px;
    --body-size:       1.06rem;
    --code-size:       14px;
    --aside-size:      12px;
    --fig-cap-size:    13px;
    /*-- Main font colors --*/
    --title-color:     #000000;
    --header-color:    rgba(0, 0, 0, 0.8);
    --body-color:      rgba(0, 0, 0, 0.8);
    --aside-color:     rgba(0, 0, 0, 0.6);
    --fig-cap-color:   rgba(0, 0, 0, 0.6);
    /*-- Specify custom fonts ~~~ must be imported above   --*/
    --heading-font:    sans-serif;
    --mono-font:       monospace;
    --body-font:       sans-serif;
    --navbar-font:     sans-serif;  /* websites + blogs only */
  }

  /*-- ARTICLE METADATA --*/
  d-byline {
    --heading-size:    0.6rem;
    --heading-color:   rgba(0, 0, 0, 0.5);
    --body-size:       0.8rem;
    --body-color:      rgba(0, 0, 0, 0.8);
  }

  /*-- ARTICLE TABLE OF CONTENTS --*/
  .d-contents {
    --heading-size:    18px;
    --contents-size:   13px;
  }

  /*-- ARTICLE APPENDIX --*/
  d-appendix {
    --heading-size:    15px;
    --heading-color:   rgba(0, 0, 0, 0.65);
    --text-size:       0.8em;
    --text-color:      rgba(0, 0, 0, 0.5);
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  /* These properties only apply to Distill sites and blogs  */

  .distill-site-header {
    --title-size:       18px;
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  .distill-site-footer {
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  /*-- Additional custom styles --*/
  /* Add any additional CSS rules below                      */
  </style>
  <style type="text/css">@import url(https://cdn.jsdelivr.net/gh/moonspam/NanumSquare@2.0/nanumsquare.css);
  @import url(https://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css);
  /* base variables */

  /* Edit the CSS properties in this file to create a custom
     Distill theme. Only edit values in the right column
     for each row; values shown are the CSS defaults.
     To return any property to the default,
     you may set its value to: unset
     All rows must end with a semi-colon.                      */

  /* Optional: embed custom fonts here with `@import`          */
  /* This must remain at the top of this file.                 */

  :root {
    --custom-grey60: rgb(102, 102, 102);
    --custom-grey20: rgb(204, 204, 204);
    --custom-grey10: rgb(230, 230, 230);
    --custom-blue: rgb(0, 114, 188);
    --custom-lightblue: rgb(204, 227, 242);
    --custom-orange: rgb(255, 127, 42);
    --custom-lightorange: rgb(255, 204, 170);
  }

  html {
    /*-- Main font sizes --*/
    --title-size:      50px;
    --body-size:       1.06rem;
    --code-size:       14px;
    --aside-size:      12px;
    --fig-cap-size:    13px;
    /*-- Main font colors --*/
    --title-color:     #000000;
    --header-color:    rgba(0, 0, 0, 0.8);
    --body-color:      rgba(0, 0, 0, 0.8);
    --aside-color:     rgba(0, 0, 0, 0.6);
    --fig-cap-color:   rgba(0, 0, 0, 0.6);
    /*-- Specify custom fonts ~~~ must be imported above   --*/
    --heading-font:    sans-serif;
    --mono-font:       D2coding;
    --body-font:       sans-serif;
    --navbar-font:     sans-serif;  /* websites + blogs only */
  }

  /*-- ARTICLE METADATA --*/
  d-byline {
    --heading-size:    0.6rem;
    --heading-color:   rgba(0, 0, 0, 0.5);
    --body-size:       0.8rem;
    --body-color:      rgba(0, 0, 0, 0.8);
  }

  /*-- ARTICLE TABLE OF CONTENTS --*/
  .d-contents {
    --heading-size:    18px;
    --contents-size:   13px;
  }

  /*-- ARTICLE APPENDIX --*/
  d-appendix {
    --heading-size:    15px;
    --heading-color:   rgba(0, 0, 0, 0.65);
    --text-size:       0.8em;
    --text-color:      rgba(0, 0, 0, 0.5);
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  /* These properties only apply to Distill sites and blogs  */

  .distill-site-header {
    --title-size:       18px;
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       var(--custom-blue);
  }

  .distill-site-footer {
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       var(--custom-blue);
  }

  /*-- Additional custom styles --*/
  /* Add any additional CSS rules below                      */

  .preface {
    font-size: 11pt;
    background-color: var(--custom-lightblue);
    margin-top: 1em;
    margin-bottom: 0.5em;
    padding: 1.5em;
    padding-top: 0.5em;
    border-color: DodgerBlue;
  }

  h1 {
    font-size: 30px !important;
    color: var(--custom-blue) !important;
    font-family: NanumSquare !important;
    margin-top: 15px !important;
    padding-top: 15px !important;
    margin-bottom: 15px !important;
    font-weight: bold;
  }

  h2 {
    font-size: 25px !important;
    color: var(--custom-blue) !important;
    font-family: NanumSquare !important;
    padding-top: 15px !important;
    margin-top: 15px !important;
    padding-bottom: 10px !important;
    margin-bottom: 10px !important;
    font-weight: bold;
  }

  h3 {
    font-size: 20px !important;
    color: var(--custom-blue) !important;
    font-family: NanumSquare !important;
    margin-top: 10px !important;
    margin-bottom: 10px !important;
    padding-top: 10px !important;
    padding-bottom: 10px !important;
    font-weight: bold;
  }

  .tab-content {
     top: 25px;
     padding: 20px;
  }

  .bg-blue,
  .bg-orange,
  .bg-grey {
    padding: 1.6em;
    margin-top: 1.0em;
    margin-bottom: 1.0em;
  }
  .bg-blue {
    background-color: var(--custom-lightblue);
  }
  .bg-orange {
    background-color: var(--custom-lightorange);
  }
  .bg-grey {
    background-color: var(--custom-grey20);
  }
  .bg-blue > *:last-child,
  .bg-orange > *:last-child,
  .bg-grey > *:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
  }

  .panelset {
    --panel-tab-foreground: currentColor !important;
    --panel-tab-active-foreground: var(--custom-blue) !important;
    --panel-tab-active-background: var(--custom-lightblue) !important;
    --panel-tab-hover-foreground: var(--custom-blue) !important;
    --panel-tabs-border-bottom: #ddd !important;
    --panel-tab-inactive-opacity: 0.5 !important;
  }

  d-byline {
      contain: content;
      overflow: hidden;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      font-size: 0.8rem;
      line-height: 1.8em;
      padding: 1.5rem 0;
      min-height: 1.8em;
  }

  d-byline h3 {
      font-size: 0.6rem !important;
      font-weight: 400;
      color: rgba(0, 0, 0, 0.5) !important;
      margin: 4.8px 0px 0px 0px !important;
      padding: 0px 0px 0px 0px !important;
      text-transform: uppercase;
  }


  blockquote {
    background: var(--custom-grey10);
    border-left: 10px solid #ccc !important;
    margin: 1.5em 10px;
    padding: 0.5em 10px;
    quotes: "\201C""\201D""\2018""\2019";
  }

  blockquote:before {
    color: #ccc;
    content: open-quote;
    font-size: 4em;
    line-height: 0.1em;
    margin-right: 0.25em;
    vertical-align: -0.4em;
  }

  blockquote p {
    display: inline;
  }</style>
  <style type="text/css">
  /* base style */

  /* FONT FAMILIES */

  :root {
    --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  body,
  .posts-list .post-preview p,
  .posts-list .description p {
    font-family: var(--body-font), var(--body-default);
  }

  h1, h2, h3, h4, h5, h6,
  .posts-list .post-preview h2,
  .posts-list .description h2 {
    font-family: var(--heading-font), var(--heading-default);
  }

  d-article div.sourceCode code,
  d-article pre code {
    font-family: var(--mono-font), var(--mono-default);
  }


  /*-- TITLE --*/
  d-title h1,
  .posts-list > h1 {
    color: var(--title-color, black);
  }

  d-title h1 {
    font-size: var(--title-size, 50px);
  }

  /*-- HEADERS --*/
  d-article h1,
  d-article h2,
  d-article h3,
  d-article h4,
  d-article h5,
  d-article h6 {
    color: var(--header-color, rgba(0, 0, 0, 0.8));
  }

  /*-- BODY --*/
  d-article > p,  /* only text inside of <p> tags */
  d-article > ul, /* lists */
  d-article > ol {
    color: var(--body-color, rgba(0, 0, 0, 0.8));
    font-size: var(--body-size, 1.06rem);
  }


  /*-- CODE --*/
  d-article div.sourceCode code,
  d-article pre code {
    font-size: var(--code-size, 14px);
  }

  /*-- ASIDE --*/
  d-article aside {
    font-size: var(--aside-size, 12px);
    color: var(--aside-color, rgba(0, 0, 0, 0.6));
  }

  /*-- FIGURE CAPTIONS --*/
  figure .caption,
  figure figcaption,
  .figure .caption {
    font-size: var(--fig-cap-size, 13px);
    color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
  }

  /*-- METADATA --*/
  d-byline h3 {
    font-size: var(--heading-size, 0.6rem);
    color: var(--heading-color, rgba(0, 0, 0, 0.5));
  }

  d-byline {
    font-size: var(--body-size, 0.8rem);
    color: var(--body-color, rgba(0, 0, 0, 0.8));
  }

  d-byline a,
  d-article d-byline a {
    color: var(--body-color, rgba(0, 0, 0, 0.8));
  }

  /*-- TABLE OF CONTENTS --*/
  .d-contents nav h3 {
    font-size: var(--heading-size, 18px);
  }

  .d-contents nav a {
    font-size: var(--contents-size, 13px);
  }

  /*-- APPENDIX --*/
  d-appendix h3 {
    font-size: var(--heading-size, 15px);
    color: var(--heading-color, rgba(0, 0, 0, 0.65));
  }

  d-appendix {
    font-size: var(--text-size, 0.8em);
    color: var(--text-color, rgba(0, 0, 0, 0.5));
  }

  d-appendix d-footnote-list a.footnote-backlink {
    color: var(--text-color, rgba(0, 0, 0, 0.5));
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  .distill-site-header .title {
    font-size: var(--title-size, 18px);
    font-family: var(--navbar-font), var(--heading-default);
  }

  .distill-site-header a,
  .nav-dropdown .nav-dropbtn {
    font-family: var(--navbar-font), var(--heading-default);
  }

  .nav-dropdown .nav-dropbtn {
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    font-size: var(--text-size, 15px);
  }

  .distill-site-header a:hover,
  .nav-dropdown:hover .nav-dropbtn {
    color: var(--hover-color, white);
  }

  .distill-site-header {
    font-size: var(--text-size, 15px);
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    background-color: var(--bkgd-color, #0F2E3D);
  }

  .distill-site-footer {
    font-size: var(--text-size, 15px);
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    background-color: var(--bkgd-color, #0F2E3D);
  }

  .distill-site-footer a:hover {
    color: var(--hover-color, white);
  }</style>
  <!--/radix_placeholder_distill-->
  <script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
  <link href="site_libs/panelset-0.2.6/panelset.css" rel="stylesheet" />
  <script src="site_libs/panelset-0.2.6/panelset.js"></script>
  <script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
  <link href="site_libs/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet" />
  <script src="site_libs/wordcloud2-0.0.1/wordcloud2-all.js"></script>
  <script src="site_libs/wordcloud2-0.0.1/hover.js"></script>
  <script src="site_libs/wordcloud2-binding-0.2.1/wordcloud2.js"></script>
  <script src="site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"캡스톤 프로젝트","description":"우리는 한 학기 과정의 핵심 내용을 실습을 통해서 다시한번 다지고 나갑니다.","authors":[{"author":"김민성","authorURL":"https://minnsung-kim.github.io","affiliation":"명지대","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-12-16T00:00:00.000+09:00","citationText":"김민성, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="index.html" class="title">샘플 웹 사이트</a>
</div>
<div class="nav-right">
<a href="index.html">Home</a>
<a href="create_website.html">샘플 웹 사이트 개발하기</a>
<div class="nav-dropdown">
<button class="nav-dropbtn">
나의 텍스트 분석 경험
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="classifier_lasso.html">대통령 연설문 예측</a>
<a href="classifier_bert.html">캡스톤 프로젝트</a>
</div>
</div>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>캡스톤 프로젝트</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>우리는 한 학기 과정의 핵심 내용을 실습을 통해서 다시한번 다지고
나갑니다.</p></p>
</div>

<div class="d-byline">
  김민성 <a href="https://minnsung-kim.github.io"
class="uri">https://minnsung-kim.github.io</a> (명지대)
  
<br/>2022-12-16
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#텍스트-데이터-수집">텍스트 데이터 수집</a>
<ul>
<li><a href="#수집전략">수집전략</a></li>
<li><a href="#준비사항">준비사항</a></li>
<li><a href="#데이터-수집">데이터 수집</a></li>
</ul></li>
<li><a href="#정규표현식의-이해">정규표현식의 이해</a>
<ul>
<li><a href="#패턴-검색">패턴 검색</a></li>
</ul></li>
<li><a href="#correlation-analysis">Correlation Analysis</a>
<ul>
<li><a href="#term-frequency">Term Frequency</a></li>
<li><a href="#연관분석">연관분석</a></li>
</ul></li>
<li><a href="#binary-term-frequency-기반-dtm-생성">Binary Term Frequency
기반 DTM 생성</a></li>
<li><a href="#불용어-제거">불용어 제거</a>
<ul>
<li><a href="#transactions-생성하기">Transactions 생성하기</a></li>
<li><a href="#연관규칙-생성하기">연관규칙 생성하기</a></li>
<li><a href="#연관규칙-시각화하기">연관규칙 시각화하기</a></li>
</ul></li>
<li><a href="#단어의-계층적-군집분석">단어의 계층적 군집분석</a>
<ul>
<li><a href="#희박-단어의-제거">희박 단어의 제거</a></li>
<li><a href="#비상사도-행렬-생성">비상사도 행렬 생성</a></li>
<li><a href="#clustering">Clustering</a></li>
<li><a href="#군집-개수-선정-및-시각화">군집 개수 선정 및
시각화</a></li>
<li><a href="#군집의-해석">군집의 해석</a></li>
</ul></li>
<li><a href="#기사의-계층적-군집분석">기사의 계층적 군집분석</a>
<ul>
<li><a href="#비상사도-행렬-생성-1">비상사도 행렬 생성</a></li>
<li><a href="#clustering-1">Clustering</a></li>
<li><a href="#군집-개수-선정-및-시각화-1">군집 개수 선정 및
시각화</a></li>
<li><a href="#군집의-해석-1">군집의 해석</a></li>
<li><a href="#기사-군집-1">기사 군집 1</a></li>
</ul></li>
<li><a href="#topic-분석">Topic 분석</a>
<ul>
<li><a href="#희박-단어의-제거-1">희박 단어의 제거</a></li>
<li><a href="#otf-계산">OTF 계산</a></li>
<li><a href="#불용어-제거-1">불용어 제거</a></li>
<li><a href="#불용어-제거-2">불용어 제거</a></li>
<li><a href="#topic-개수-구하기">Topic 개수 구하기</a></li>
<li><a href="#top-beta-단어의-시각화">Top beta 단어의 시각화</a></li>
<li><a href="#문서에서의-토픽의-비중">문서에서의 토픽의 비중</a></li>
<li><a href="#토픽이-포함된-문서-조회">토픽이 포함된 문서 조회</a></li>
<li><a href="#문서의-토픽-분해">문서의 토픽 분해</a></li>
<li><a href="#토픽의-단어-분해">토픽의 단어 분해</a></li>
</ul></li>
<li><a href="#이진분류-모형">이진분류 모형</a>
<ul>
<li><a href="#패키지-로드하기">패키지 로드하기</a></li>
<li><a href="#파생변수-만들기">파생변수 만들기</a></li>
<li><a href="#불균형-데이터의-언더-샘플링">불균형 데이터의 언더
샘플링</a></li>
<li><a href="#데이터셋-분리">데이터셋 분리</a></li>
<li><a href="#tokenize-반복기-정의">tokenize 반복기 정의</a></li>
<li><a href="#frequency-기반의-dtm-생성">Frequency 기반의 DTM
생성</a></li>
<li><a href="#n-grams-기반의-dtm-생성">N-Grams 기반의 DTM 생성</a></li>
<li><a href="#tf-idf-기반의-dtm-생성">TF-IDF 기반의 DTM 생성</a></li>
<li><a href="#dtm의-크기-비교">DTM의 크기 비교</a></li>
<li><a href="#frequency-기반-모델링">Frequency 기반 모델링</a></li>
<li><a href="#모델의-이해">모델의 이해</a></li>
<li><a href="#모델의-평가">모델의 평가</a></li>
</ul></li>
</ul>
</nav>
</div>
<h2 id="텍스트-데이터-수집">텍스트 데이터 수집</h2>
<h3 id="수집전략">수집전략</h3>
<ul>
<li>“월드컵”이라는 키워드로 네이버 뉴스 데이터를 수집합니다.</li>
<li>날짜 정렬과 유사도 정렬 두 가지 방법 모두 사용합니다.</li>
</ul>
<h3 id="준비사항">준비사항</h3>
<ul>
<li>클라이언트 아이디 : Kw6jqiYX_rA3Cud_pjJb</li>
<li>클라이언트 키 : p57_rPaA85</li>
</ul>
<h3 id="데이터-수집">데이터 수집</h3>
<p>인증키와 키워드 입력 client_id, client_secret는 사용자의 API 인증키를
넣습니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>koscrap</span><span class='op'>)</span>
<span class='co'># Naver 뉴스 API 인증키</span>
<span class='va'>client_id</span> <span class='op'>&lt;-</span> <span class='st'>"Kw6jqiYX_rA3Cud_pjJb"</span>
<span class='va'>client_secret</span> <span class='op'>&lt;-</span> <span class='st'>"p57_rPaA85"</span>
<span class='co'># 검색 키워드</span>
<span class='va'>keyword</span> <span class='op'>&lt;-</span> <span class='st'>"월드컵"</span>
</code></pre>
</div>
</div>
<p>날짜 기준 정렬로 1,000건의 뉴스를 수집합니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>n</span> <span class='op'>&lt;-</span> <span class='fl'>1000</span>
<span class='co'># 날짜 정렬 수집</span>
<span class='va'>news_worldcup_date</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/koscrap/man/search_naver.html'>search_naver</a></span><span class='op'>(</span>
  <span class='va'>keyword</span>, client_id <span class='op'>=</span> <span class='va'>client_id</span>, client_secret <span class='op'>=</span> <span class='va'>client_secret</span>,
  do_done <span class='op'>=</span> <span class='cn'>TRUE</span>, max_record <span class='op'>=</span> <span class='va'>n</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<p>유사도 기준 정렬로 1,000건의 뉴스를 수집합니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># 유사도 정렬 수집</span>
<span class='va'>news_worldcup_sim</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/koscrap/man/search_naver.html'>search_naver</a></span><span class='op'>(</span>
  <span class='va'>keyword</span>, client_id <span class='op'>=</span> <span class='va'>client_id</span>, client_secret <span class='op'>=</span> <span class='va'>client_secret</span>, sort <span class='op'>=</span> <span class='st'>"sim"</span>,
  do_done <span class='op'>=</span> <span class='cn'>TRUE</span>, max_record <span class='op'>=</span> <span class='va'>n</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<p>각각 2749645건의 데이터가 수집되었습니다. 변수의 개수는
7개입니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>news_worldcup_date</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>news_worldcup_sim</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>앞부분 몇 건과 뒷부분 몇 건을 조회해 봅니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>news_worldcup_date</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span><span class='op'>(</span><span class='va'>news_worldcup_sim</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>###간단한 데이터 요약</p>
<p>빈발단어를 워드클라우드로 시각회하는 함수를 만듦니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># create UDF</span>
<span class='va'>create_wordcloud</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>remove_n</span> <span class='op'>=</span> <span class='fl'>5</span>, <span class='va'>min_freq</span> <span class='op'>=</span> <span class='fl'>5</span>, <span class='va'>background</span> <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>data</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nchar.html'>nchar</a></span><span class='op'>(</span><span class='va'>description_text</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>   
    <span class='fu'>tidytext</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/tidytext/man/unnest_tokens.html'>unnest_tokens</a></span><span class='op'>(</span><span class='va'>noun</span>, <span class='va'>description_text</span>, <span class='fu'>bitTA</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/bitTA/man/morpho_mecab.html'>morpho_mecab</a></span>, type <span class='op'>=</span> <span class='st'>"noun"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>noun</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/desc.html'>desc</a></span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>     
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>n</span> <span class='op'>&gt;=</span> <span class='va'>min_freq</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/ranking.html'>row_number</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='va'>remove_n</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
    <span class='fu'>wordcloud2</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/wordcloud2/man/wordcloud2.html'>wordcloud2</a></span><span class='op'>(</span>backgroundColor <span class='op'>=</span> <span class='va'>background</span>, 
                           fontFamily <span class='op'>=</span> <span class='st'>"NanumSquare"</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p>수집한 뉴스에 대해서 워드클라우드를 그려 봅니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>bitReport</span><span class='op'>)</span>

<span class='co'>#날짜 기준 뉴스</span>
<span class='va'>news_worldcup_date</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'>create_wordcloud</span><span class='op'>(</span>remove_n <span class='op'>=</span> <span class='fl'>20</span>, min_freq <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
<span class='co'>#유사도 기준 뉴스</span>
<span class='va'>news_worldcup_sim</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'>create_wordcloud</span><span class='op'>(</span>remove_n <span class='op'>=</span> <span class='fl'>20</span>, min_freq <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="정규표현식의-이해">정규표현식의 이해</h2>
<h3 id="패턴-검색">패턴 검색</h3>
<p>유사도 정렬 기준으로 수집한 뉴스 중에서 선수와 감독의 이름이 포함된
기사의 건수를 계산하고 각각의 기사에서 해당 선수위 감독의 이름이 몇 번
등장하는지 계산합니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>persons</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/arules/man/c.html'>c</a></span><span class='op'>(</span><span class='st'>"벤투"</span>, <span class='st'>"손흥민"</span>, <span class='st'>"조규성"</span>, <span class='st'>"이강인"</span>, <span class='st'>"호날두"</span>, <span class='st'>"메시"</span><span class='op'>)</span>

<span class='va'>persons</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map_int</a></span><span class='op'>(</span>
    <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span>
      <span class='va'>news_worldcup_sim</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
        <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'>stringr</span><span class='fu'>::</span><span class='fu'><a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect</a></span><span class='op'>(</span><span class='va'>description_text</span>, <span class='va'>x</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
        <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>tally</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
        <span class='fu'><a href='https://dplyr.tidyverse.org/reference/pull.html'>pull</a></span><span class='op'>(</span><span class='op'>)</span>
    <span class='op'>}</span>
  <span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1]  60  62   0   0   4 182</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>persons</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/arules/man/c.html'>c</a></span><span class='op'>(</span><span class='st'>"벤투"</span>, <span class='st'>"손흥민"</span>, <span class='st'>"조규성"</span>, <span class='st'>"이강인"</span>, <span class='st'>"호날두"</span>, <span class='st'>"메시"</span><span class='op'>)</span>

<span class='va'>persons</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map_dbl</a></span><span class='op'>(</span>
    <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span>
      <span class='va'>news_worldcup_sim</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
        <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'>stringr</span><span class='fu'>::</span><span class='fu'><a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect</a></span><span class='op'>(</span><span class='va'>description_text</span>, <span class='va'>x</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
        <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>n_talk <span class='op'>=</span> <span class='fu'>stringr</span><span class='fu'>::</span><span class='fu'><a href='https://stringr.tidyverse.org/reference/str_count.html'>str_count</a></span><span class='op'>(</span><span class='va'>description_text</span>, <span class='va'>x</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
        <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>n_avg <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>n_talk</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
        <span class='fu'><a href='https://dplyr.tidyverse.org/reference/pull.html'>pull</a></span><span class='op'>(</span><span class='op'>)</span>
    <span class='op'>}</span>
  <span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 1.166667 1.516129      NaN      NaN 1.000000 1.461538</code></pre>
</div>
<p>##Document Term Matrix의 이해 ###DTM 생성하기</p>
<p>유사도 정렬 기준 뉴스의 Term Frequency 기반의 DTM과 TF-IDF 기반의
DTM을 생성합니다.</p>
<p>뉴스 데이터는 문서 아이디로 사용할 변수가 없기 때문에 아이디를
만듦니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>news_worldcup_sim</span> <span class='op'>&lt;-</span> <span class='va'>news_worldcup_sim</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>id <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/ranking.html'>row_number</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>인명인 고유명사도 함께 추출한 DTM을 만들기 위해서
unnest_noun_ngrams() 함수의 type 인수값에 “noun2”를 사용합니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>bitTA</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/juliasilge/tidytext'>tidytext</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://tm.r-forge.r-project.org/'>tm</a></span><span class='op'>)</span>

<span class='va'>dtm_tf</span> <span class='op'>&lt;-</span> <span class='va'>news_worldcup_sim</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/bitTA/man/unnest_noun_ngrams.html'>unnest_noun_ngrams</a></span><span class='op'>(</span><span class='va'>term</span>, <span class='va'>description_text</span>, n <span class='op'>=</span> <span class='fl'>1</span>, type <span class='op'>=</span> <span class='st'>"noun2"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect</a></span><span class='op'>(</span><span class='va'>term</span>, <span class='st'>"[[a-zA-Z]]+"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>  
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>term</span>, sort <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/tidytext/man/document_term_casters.html'>cast_dtm</a></span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>term</span>, <span class='va'>n</span><span class='op'>)</span>

<span class='fu'>tm</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/tm/man/inspect.html'>inspect</a></span><span class='op'>(</span><span class='va'>dtm_tf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&lt;&lt;DocumentTermMatrix (documents: 1000, terms: 687)&gt;&gt;
Non-/sparse entries: 20359/666641
Sparsity           : 97%
Maximal term length: 6
Weighting          : term frequency (tf)
Sample             :
     Terms
Docs  결승 년 모로코 월드컵 일 축구 카타르 팀 프랑스 한국
  125    0  0      0      2  2    0      0  0      0    0
  152    0  1      1      3  1    0      2  0      1    1
  224    0  0      0      2  2    0      0  0      0    0
  251    0  1      1      3  1    0      2  0      1    1
  26     0  0      0      2  2    0      0  0      0    0
  323    0  0      0      2  2    0      0  0      0    0
  350    0  1      1      3  1    0      2  0      1    1
  422    0  0      0      2  2    0      0  0      0    0
  449    0  1      1      3  1    0      2  0      1    1
  53     0  1      1      3  1    0      2  0      1    1</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#TF-IDF 기반의 DTM</span>

<span class='va'>dtm_tfidf</span> <span class='op'>&lt;-</span> <span class='va'>news_worldcup_sim</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/bitTA/man/unnest_noun_ngrams.html'>unnest_noun_ngrams</a></span><span class='op'>(</span><span class='va'>term</span>, <span class='va'>description_text</span>, n <span class='op'>=</span> <span class='fl'>1</span>, type <span class='op'>=</span> <span class='st'>"noun2"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect</a></span><span class='op'>(</span><span class='va'>term</span>, <span class='st'>"[[a-zA-Z]]+"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>  
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>term</span>, sort <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/tidytext/man/document_term_casters.html'>cast_dtm</a></span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>term</span>, <span class='va'>n</span>, weighting <span class='op'>=</span> <span class='fu'>tm</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/tm/man/weightTfIdf.html'>weightTfIdf</a></span><span class='op'>)</span>

<span class='fu'>tm</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/tm/man/inspect.html'>inspect</a></span><span class='op'>(</span><span class='va'>dtm_tfidf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&lt;&lt;DocumentTermMatrix (documents: 1000, terms: 687)&gt;&gt;
Non-/sparse entries: 20359/666641
Sparsity           : 97%
Maximal term length: 6
Weighting          : term frequency - inverse document frequency (normalized) (tf-idf)
Sample             :
     Terms
Docs  결승 년 대표 메시 모로코 아르헨티나 우승 팀 프랑스 한국
  300    0  0    0    0      0          0    0  0      0    0
  399    0  0    0    0      0          0    0  0      0    0
  498    0  0    0    0      0          0    0  0      0    0
  597    0  0    0    0      0          0    0  0      0    0
  696    0  0    0    0      0          0    0  0      0    0
  795    0  0    0    0      0          0    0  0      0    0
  894    0  0    0    0      0          0    0  0      0    0
  900    0  0    0    0      0          0    0  0      0    0
  993    0  0    0    0      0          0    0  0      0    0
  999    0  0    0    0      0          0    0  0      0    0</code></pre>
</div>
<h2 id="correlation-analysis">Correlation Analysis</h2>
<p>각각의 선수와 감독별로 상관계수가 0.4 이상인 단어를 추출해봅니다.</p>
<h3 id="term-frequency">Term Frequency</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>persons</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/arules/man/c.html'>c</a></span><span class='op'>(</span><span class='st'>"벤투"</span>, <span class='st'>"손흥민"</span>, <span class='st'>"조규성"</span>, <span class='st'>"이강인"</span>, <span class='st'>"호날두"</span>, <span class='st'>"메시"</span><span class='op'>)</span>

<span class='va'>persons</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map</a></span><span class='op'>(</span>
    <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'>tm</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/tm/man/findAssocs.html'>findAssocs</a></span><span class='op'>(</span><span class='va'>dtm_tf</span>, terms <span class='op'>=</span> <span class='va'>x</span>, corlimit <span class='op'>=</span> <span class='fl'>0.4</span><span class='op'>)</span>
  <span class='op'>)</span>
</code></pre>
</div>
<pre><code>[[1]]
[[1]]$벤투
파울루   개월   부임   생활   직후 마침표   감독   과업   조국     간 
  0.86   0.82   0.82   0.82   0.82   0.71   0.68   0.57   0.49   0.46 
  달성 
  0.46 


[[2]]
[[2]]$손흥민
      토트넘         얼굴     잉글리시         출장 프리미어리그 
        0.72         0.50         0.50         0.50         0.50 
      보호대         부친           손       손웅정     아카데미 
        0.50         0.50         0.50         0.50         0.50 
        안면         입성         착용         공동       마스크 
        0.50         0.50         0.50         0.50         0.50 
        막판       빅리그         폭풍       득점왕         투호 
        0.50         0.50         0.50         0.43         0.41 


[[3]]
[[3]]$조규성
numeric(0)


[[4]]
[[4]]$이강인
numeric(0)


[[5]]
[[5]]$호날두
    결별       드     맨유 맨체스터       몸     무적     상태 
     1.0      1.0      1.0      1.0      1.0      1.0      1.0 
    신세 유나이티     유지 잉글랜드     좌절 
     1.0      1.0      1.0      1.0      0.4 


[[6]]
[[6]]$메시
    리오넬 아르헨티나     마지막         꿈       생애       목표 
      0.81       0.57       0.56       0.51       0.44       0.41 
      기록     맹활약 
      0.41       0.41 </code></pre>
</div>
<h3 id="연관분석">연관분석</h3>
<h2 id="binary-term-frequency-기반-dtm-생성">Binary Term Frequency 기반
DTM 생성</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dtm_bin_tf</span> <span class='op'>&lt;-</span> <span class='va'>news_worldcup_sim</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/bitTA/man/unnest_noun_ngrams.html'>unnest_noun_ngrams</a></span><span class='op'>(</span><span class='va'>term</span>, <span class='va'>description_text</span>, n <span class='op'>=</span> <span class='fl'>1</span>, type <span class='op'>=</span> <span class='st'>"noun2"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect</a></span><span class='op'>(</span><span class='va'>term</span>, <span class='st'>"[[a-zA-Z]]+"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>  
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>term</span>, sort <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/tidytext/man/document_term_casters.html'>cast_dtm</a></span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>term</span>, <span class='va'>n</span>, weighting <span class='op'>=</span> <span class='fu'>tm</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/tm/man/weightBin.html'>weightBin</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="불용어-제거">불용어 제거</h2>
<p>상위 50위인 단어를 불용어로 처리하여 제거합니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>stop_words</span> <span class='op'>&lt;-</span> <span class='va'>dtm_bin_tf</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='va'>sum</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/arules/man/sort.html'>sort</a></span><span class='op'>(</span>decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='st'>"["</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>30</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>stop_words</span>
</code></pre>
</div>
<pre><code> [1] &quot;월드컵&quot;       &quot;카타르&quot;       &quot;일&quot;           &quot;프랑스&quot;      
 [5] &quot;한국&quot;         &quot;팀&quot;           &quot;축구&quot;         &quot;결승&quot;        
 [9] &quot;시간&quot;         &quot;모로코&quot;       &quot;우승&quot;         &quot;년&quot;          
[13] &quot;진출&quot;         &quot;대표&quot;         &quot;아르헨티나&quot;   &quot;준결승전&quot;    
[17] &quot;번&quot;           &quot;카타르월드컵&quot; &quot;메시&quot;         &quot;강&quot;          
[21] &quot;스타디움&quot;     &quot;선수&quot;         &quot;대회&quot;         &quot;알코르&quot;      
[25] &quot;결승전&quot;       &quot;국가&quot;         &quot;국제축구연맹&quot; &quot;러시아&quot;      
[29] &quot;만&quot;           &quot;전&quot;          </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dtm_bin_tf</span> <span class='op'>&lt;-</span> <span class='va'>news_worldcup_sim</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/bitTA/man/unnest_noun_ngrams.html'>unnest_noun_ngrams</a></span><span class='op'>(</span><span class='va'>term</span>, <span class='va'>description_text</span>, n <span class='op'>=</span> <span class='fl'>1</span>, type <span class='op'>=</span> <span class='st'>"noun2"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='va'>term</span> <span class='op'><a href='https://rdrr.io/pkg/arules/man/match.html'>%in%</a></span> <span class='va'>stop_words</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect</a></span><span class='op'>(</span><span class='va'>term</span>, <span class='st'>"[[a-zA-Z]]+|[[0-9]]+"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>  
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>term</span>, sort <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/tidytext/man/document_term_casters.html'>cast_dtm</a></span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>term</span>, <span class='va'>n</span>, weighting <span class='op'>=</span> <span class='fu'>tm</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/tm/man/weightBin.html'>weightBin</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="transactions-생성하기">Transactions 생성하기</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://github.com/mhahsler/arules'>"arules"</a></span><span class='op'>)</span>

<span class='va'>trans</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/methods/as.html'>as</a></span><span class='op'>(</span><span class='va'>dtm_bin_tf</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"transactions"</span><span class='op'>)</span>
<span class='va'>trans</span>
</code></pre>
</div>
<pre><code>transactions in sparse format with
 1000 transactions (rows) and
 655 items (columns)</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>trans</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>transactions as itemMatrix in sparse format with
 1000 rows (elements/itemsets/transactions) and
 655 columns (items) and a density of 0.01803664 

most frequent items:
   승리    경기  바이트      알    이번 (Other) 
    113     104     100     100      99   11298 

element (itemset/transaction) length distribution:
sizes
  2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18 
 20   7  10  10  37  10 100 103  70 111  75  61 147  99  60  23  27 
 19  22  24 
 10  10  10 

   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   2.00    9.00   12.00   11.81   14.00   24.00 

includes extended item information - examples:
  labels
1     명
2     홀
3 오현규

includes extended transaction information - examples:
  transactionID
1             1
2            26
3            35</code></pre>
</div>
<h3 id="연관규칙-생성하기">연관규칙 생성하기</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>rules</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/arules/man/apriori.html'>apriori</a></span><span class='op'>(</span><span class='va'>trans</span>, parameter <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>support <span class='op'>=</span> <span class='fl'>0.05</span>, conf <span class='op'>=</span> <span class='fl'>0.6</span>, target <span class='op'>=</span> <span class='st'>"rules"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Apriori

Parameter specification:
 confidence minval smax arem  aval originalSupport maxtime support
        0.6    0.1    1 none FALSE            TRUE       5    0.05
 minlen maxlen target  ext
      1     10  rules TRUE

Algorithmic control:
 filter tree heap memopt load sort verbose
    0.1 TRUE TRUE  FALSE TRUE    2    TRUE

Absolute minimum support count: 50 

set item appearances ...[0 item(s)] done [0.00s].
set transactions ...[655 item(s), 1000 transaction(s)] done [0.00s].
sorting and recoding items ... [50 item(s)] done [0.00s].
creating transaction tree ... done [0.00s].
checking subsets of size 1 2 3 done [0.00s].
writing ... [51 rule(s)] done [0.00s].
creating S4 object  ... done [0.00s].</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>rules</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>set of 51 rules

rule length distribution (lhs + rhs):sizes
 2  3 
39 12 

   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  2.000   2.000   2.000   2.235   2.000   3.000 

summary of quality measures:
    support          confidence        coverage      
 Min.   :0.05000   Min.   :0.6250   Min.   :0.05000  
 1st Qu.:0.05000   1st Qu.:0.7143   1st Qu.:0.05000  
 Median :0.05000   Median :0.8333   Median :0.06000  
 Mean   :0.05388   Mean   :0.8426   Mean   :0.06573  
 3rd Qu.:0.05000   3rd Qu.:1.0000   3rd Qu.:0.07950  
 Max.   :0.08000   Max.   :1.0000   Max.   :0.10000  
      lift            count      
 Min.   : 5.531   Min.   :50.00  
 1st Qu.:10.550   1st Qu.:50.00  
 Median :12.500   Median :50.00  
 Mean   :12.503   Mean   :53.88  
 3rd Qu.:13.438   3rd Qu.:50.00  
 Max.   :20.000   Max.   :80.00  

mining info:
  data ntransactions support confidence
 trans          1000    0.05        0.6
                                                                                  call
 apriori(data = trans, parameter = list(support = 0.05, conf = 0.6, target = &quot;rules&quot;))</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>arules</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/arules/man/inspect.html'>inspect</a></span><span class='op'>(</span><span class='va'>rules</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>    lhs         rhs      support confidence coverage lift     count
[1] {계단}   =&gt; {통산}   0.067   1.0000000  0.067    12.98701 67   
[2] {통산}   =&gt; {계단}   0.067   0.8701299  0.077    12.98701 67   
[3] {딩}     =&gt; {디펜}   0.050   1.0000000  0.050    20.00000 50   
[4] {디펜}   =&gt; {딩}     0.050   1.0000000  0.050    20.00000 50   
[5] {인터뷰} =&gt; {오현규} 0.050   1.0000000  0.050    12.50000 50   </code></pre>
</div>
<h3 id="연관규칙-시각화하기">연관규칙 시각화하기</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://github.com/mhahsler/arulesViz'>"arulesViz"</a></span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/pkg/arulesViz/man/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>rules</span><span class='op'>)</span>
</code></pre>
</div>
<img src="classifier_bert_files/figure-html5/unnamed-chunk-91-1.png" width="1152" style="display: block; margin: auto;" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>rule2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/arules/man/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>rules</span>, by <span class='op'>=</span> <span class='st'>"confidence"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/arulesViz/man/inspectDT.html'>inspect</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/arules/man/associations-class.html'>head</a></span><span class='op'>(</span><span class='va'>rule2</span>, n <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>     lhs                 rhs          support confidence coverage
[1]  {계단}           =&gt; {통산}       0.067   1          0.067   
[2]  {딩}             =&gt; {디펜}       0.050   1          0.050   
[3]  {디펜}           =&gt; {딩}         0.050   1          0.050   
[4]  {인터뷰}         =&gt; {오현규}     0.050   1          0.050   
[5]  {테}             =&gt; {에르난데스} 0.050   1          0.050   
[6]  {테}             =&gt; {선제골}     0.050   1          0.050   
[7]  {수원}           =&gt; {오현규}     0.050   1          0.050   
[8]  {바}             =&gt; {페}         0.079   1          0.079   
[9]  {페}             =&gt; {바}         0.079   1          0.079   
[10] {에르난데스, 테} =&gt; {선제골}     0.050   1          0.050   
     lift     count
[1]  12.98701 67   
[2]  20.00000 50   
[3]  20.00000 50   
[4]  12.50000 50   
[5]  16.66667 50   
[6]  16.66667 50   
[7]  12.50000 50   
[8]  12.65823 79   
[9]  12.65823 79   
[10] 16.66667 50   </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/arulesViz/man/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>rules</span>, method <span class='op'>=</span> <span class='st'>"grouped"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="classifier_bert_files/figure-html5/unnamed-chunk-91-2.png" width="1152" style="display: block; margin: auto;" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/arulesViz/man/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>rules</span>, method <span class='op'>=</span> <span class='st'>"graph"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="classifier_bert_files/figure-html5/unnamed-chunk-91-3.png" width="1152" style="display: block; margin: auto;" /></p>
</div>
<h2 id="단어의-계층적-군집분석">단어의 계층적 군집분석</h2>
<h3 id="희박-단어의-제거">희박 단어의 제거</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>dtm_bin_tf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 1000  655</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>compact_bin</span> <span class='op'>&lt;-</span> <span class='fu'>tm</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/tm/man/removeSparseTerms.html'>removeSparseTerms</a></span><span class='op'>(</span><span class='va'>dtm_bin_tf</span>, sparse <span class='op'>=</span> <span class='fl'>0.985</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='va'>compact_bin</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>compact_bin</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 1000  217</code></pre>
</div>
<h3 id="비상사도-행렬-생성">비상사도 행렬 생성</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='va'>compact_bin</span><span class='op'>)</span>

<span class='va'>dist_matrix</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/arules/man/dissimilarity.html'>dist</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>mat</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="clustering">Clustering</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>fit</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/hclust.html'>hclust</a></span><span class='op'>(</span><span class='va'>dist_matrix</span>, method <span class='op'>=</span> <span class='st'>"ward.D"</span><span class='op'>)</span>
<span class='va'>fit</span>
</code></pre>
</div>
<pre><code>
Call:
hclust(d = dist_matrix, method = &quot;ward.D&quot;)

Cluster method   : ward.D 
Distance         : euclidean 
Number of objects: 217 </code></pre>
</div>
<h3 id="군집-개수-선정-및-시각화">군집 개수 선정 및 시각화</h3>
<p>k개 군집을 나눕니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>k</span> <span class='op'>&lt;-</span> <span class='fl'>6</span>

<span class='fu'><a href='https://rdrr.io/pkg/arulesViz/man/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>fit</span><span class='op'>)</span>
<span class='va'>cluster_list</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/rect.hclust.html'>rect.hclust</a></span><span class='op'>(</span><span class='va'>fit</span>, k <span class='op'>=</span> <span class='va'>k</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="classifier_bert_files/figure-html5/unnamed-chunk-95-1.png" width="1152" style="display: block; margin: auto;" /></p>
</div>
<h3 id="군집의-해석">군집의 해석</h3>
<p>k개 클러스터를 구성하는 단어들의 목록을 조회합니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>k</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map</a></span><span class='op'>(</span>
    <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span>
      <span class='va'>cluster_list</span><span class='op'>[[</span><span class='va'>x</span><span class='op'>]</span><span class='op'>]</span>
    <span class='op'>}</span>
  <span class='op'>)</span>
</code></pre>
</div>
<pre><code>[[1]]
        분 에르난데스       전반         니       무아     선제골 
        15         37        148        158        159        160 
      쐐기         콜         테       후반       랜달 
       161        162        163        164        201 

[[2]]
계단 통산 
  99  100 

[[3]]
    오현규       예비         저       수원         등       번호 
         2         14         46         88        142        144 
    인터뷰 뉴스데스크         뒷       삼성     이야기       순간 
       145        151        153        154        156        166 
      아무 
       167 

[[4]]
      명     기자     불참     훈련     현지   김민재     심판 
       1        3        7        8        9       10       11 
    주심 포르투갈       뒤       월     취재   손흥민     벤투 
      12       16       19       22       23       24       25 
      후     차례   폴란드     방송     매체     활약   득점왕 
      27       28       29       33       34       35       39 
    미국   특파원     나라     주장     협회     리그       중 
      41       44       45       47       48       50       56 
    출전   맞대결       위     조국 프로축구   베이트     오전 
      57       58       63       64       65       66       68 
  나폴리       말     새벽     소속       간     매치   우승컵 
      69       70       72       73       75       78       79 
    개막     동행     멤버     보름       원   토트넘   파울루 
      84       85       86       87       89       90       91 
      점     제압       차     쾌거     소식     여정     남부 
      95       96       97       98      101      102      104 
몽펠리에     발생     사고     사망       세     소년     때문 
     105      106      107      108      109      110      115 
    주목   경기력     뉴스     보도     상대     영광     월드 
     117      118      119      120      121      122      123 
    패배     공항     국제   수비수 이탈리아     이후     인천 
     124      125      126      127      128      129      130 
    출국     공개     기사     내용     모습     서울     요약 
     131      132      133      134      135      136      137 
  테일러     후보     귀국       그     마음     투호     공격 
     138      139      140      141      143      146      147 
      회 대한민국   엔트리     최종     종료     무대     일부 
     149      152      155      157      165      172      173 
  지난달       팬     달성     남자     여자   올림픽     도움 
     174      175      176      179      180      181      182 
    테오     세계     스타     과업     완승     최근   경기장 
     183      185      186      188      190      191      192 
    실리   공격수     감격     공식   가운데     거리     대형 
     193      194      195      196      197      198      199 
    사진       외   아시아   취재진     자신     코르     이상 
     200      204      207      208      210      211      212 
    기록     생애     오후 
     213      214      217 

[[5]]
챔피언   돌풍   디펜     딩 
    21     80     81     82 

[[6]]
        강전         이번         유럽         경기           바 
           4            5            6           13           17 
          페         감독           수         사상       루사일 
          18           20           26           30           31 
          것       브라질           골   크로아티아       준결승 
          32           36           38           40           42 
          때         동료       마지막     생제르맹         파리 
          43           49           51           52           53 
        영국         좌절           시         시각         역대 
          54           55           59           60           61 
        성사         승리         부상         투혼         관심 
          62           67           71           74           76 
        대결         남미       바이트           알         연속 
          77           83           92           93           94 
        이하           대         도전         연패           이 
         103          111          112          113          114 
        역사         처음         데샹         디디       리오넬 
         116          150          168          169          170 
      킬리안         이날         기대         목표         최고 
         171          177          178          184          187 
    알바레스 러시아월드컵           신         대륙     아프리카 
         189          202          203          205          206 
        본선           꿈       맹활약 
         209          215          216 </code></pre>
</div>
<h2 id="기사의-계층적-군집분석">기사의 계층적 군집분석</h2>
<h3 id="비상사도-행렬-생성-1">비상사도 행렬 생성</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mat</span> <span class='op'>&lt;-</span> <span class='va'>compact_bin</span>

<span class='va'>dist_matrix</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/arules/man/dissimilarity.html'>dist</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>mat</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="clustering-1">Clustering</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>fit</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/hclust.html'>hclust</a></span><span class='op'>(</span><span class='va'>dist_matrix</span>, method <span class='op'>=</span> <span class='st'>"ward.D"</span><span class='op'>)</span>
<span class='va'>fit</span>
</code></pre>
</div>
<pre><code>
Call:
hclust(d = dist_matrix, method = &quot;ward.D&quot;)

Cluster method   : ward.D 
Distance         : euclidean 
Number of objects: 1000 </code></pre>
</div>
<h3 id="군집-개수-선정-및-시각화-1">군집 개수 선정 및 시각화</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>k</span> <span class='op'>&lt;-</span> <span class='fl'>6</span>

<span class='fu'><a href='https://rdrr.io/pkg/arulesViz/man/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>fit</span><span class='op'>)</span>
<span class='va'>cluster_list</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/rect.hclust.html'>rect.hclust</a></span><span class='op'>(</span><span class='va'>fit</span>, k <span class='op'>=</span> <span class='va'>k</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="classifier_bert_files/figure-html5/unnamed-chunk-99-1.png" width="1152" style="display: block; margin: auto;" /></p>
</div>
<h3 id="군집의-해석-1">군집의 해석</h3>
<p>군집별 기사 ID를 추출하고 기사의 개수를 조회합니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>clusters</span> <span class='op'>&lt;-</span> <span class='va'>k</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map</a></span><span class='op'>(</span>
    <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span>
      <span class='va'>cluster_list</span><span class='op'>[[</span><span class='va'>x</span><span class='op'>]</span><span class='op'>]</span>
    <span class='op'>}</span>
  <span class='op'>)</span>
<span class='co'># 기사의 개수</span>
<span class='va'>clusters</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map_int</a></span><span class='op'>(</span><span class='va'>length</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1]  30  70 841  20  20  19</code></pre>
</div>
<h3 id="기사-군집-1">기사 군집 1</h3>
<p>20건 선별 조회 및 워드클라우드 그리기</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>news_worldcup_sim</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>id</span> <span class='op'><a href='https://rdrr.io/pkg/arules/man/match.html'>%in%</a></span> <span class='va'>clusters</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>title_text</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/arules/man/associations-class.html'>head</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>                                                         title_text
1               월드컵 음바페 경기서 패한 절친 하키미와 뜨거운 포옹
2       손흥민 아직도 월드클래스 아냐 월드컵 끝나도 단호한 손흥민父
3             월드컵 승부차기 그 살벌한 카타르시스장환수의 수數포츠
4                축구의 신 메시 마지막 꿈 월드컵 우승 한걸음 남았다
5        플레이 볼 가슴에 세 번째 별을 달 그대 그들의 월드컵 이야기
6   월드컵 음바페와 하키미 진한 포옹으로 이민 2세대 절친대결 마무리
7        포상금 못받은 예비 오현규 월드컵 멤버들 사비 모아 챙겨줬다
8         월드컵 메시 1골 1도움아르헨티나 8년 만에 월드컵 결승 진출
9      월드컵 돌아가는 김민재의 소신발언유럽파 많은 일본이 부럽네요
10                      월드컵 골키퍼 등번호는 항상 1번인가요궁즉답
11                    축구의 신 메시의 아픈 손 월드컵첫 우승에 성큼
12               월드컵 프랑스 모로코 20 제압아르헨티나와 결승 격돌
13    벤투 대신 퇴장설 사실로컬튜쇼 김진수송민규 월드컵 후일담 전해
14                    프랑스 돌풍 모로코 2대 0 제압월드컵 결승 진출
15                       월드컵 축구 대표팀 기념관 된 대통령실 로비
16                 카타르월드컵 M의 대결 성사메시vs음바페 결승 격돌
17      월드컵 음바페의 프랑스 메시의 아르헨티나와 결승 매치업 성사
18                   메시 vs 음바페카타르 월드컵 결승은 신들의 전쟁
19 월드컵 프랑스 결승행 선방쇼 요리스 메시 앞세운 아르헨도 요리할까
20           월드컵 프랑스 모로코 돌풍 잠재웠다메시와 결승서 대격돌</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># 워드클라우드</span>
<span class='va'>news_worldcup_sim</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>id</span> <span class='op'><a href='https://rdrr.io/pkg/arules/man/match.html'>%in%</a></span> <span class='va'>clusters</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/bitTA/man/unnest_noun_ngrams.html'>unnest_noun_ngrams</a></span><span class='op'>(</span><span class='va'>term</span>, <span class='va'>description_text</span>, n <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect</a></span><span class='op'>(</span><span class='va'>term</span>, <span class='st'>"[[a-zA-Z]]+|[[0-9]]+"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>  
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>term</span>, sort <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nchar.html'>nchar</a></span><span class='op'>(</span><span class='va'>term</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>   
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/ranking.html'>row_number</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>&gt;=</span> <span class='fl'>15</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'>wordcloud2</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/wordcloud2/man/wordcloud2.html'>wordcloud2</a></span><span class='op'>(</span>fontFamily <span class='op'>=</span> <span class='st'>"NanumSquare"</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-56b465896c652887804f" style="width:1152px;height:864px;" class="wordcloud2 html-widget"></div>
<script type="application/json" data-for="htmlwidget-56b465896c652887804f">{"x":{"word":["준결승전","진출","러시아","바이트","알코르","계단","국가","맞대결","성사","역사","통산","관심","기록","대결","동료","마지막","브라질","승리","이번","전반","챔피언","카타르월드컵","활약","강전","결승전","결정","경기장","과거","그라운드","대통령실","대형","도움","리그","번호","생애","선제골","순간","식민","심판","아크","에르난데스","엔트리","이상","이야기","입찰","주목","주장","지배","출전","컬투쇼","트로피","파리","폴란드","현지","후반","감격","거리","결승행","경기","경쟁","골문","골잡이","공개","공매","공식","구단","군단","기대","기쁨","나라","남부","뉴스데스크","달성","대통령","도입","도하","돌풍","득점","로비","르망","리그앙","매치","매치업","멤버","목소리","몽펠리에","무대","무아","발생","방송","보호대","본선","부친","분위기","비판","비하인드","사고","사망","사인","사진","생제르맹","선물","선정","세계","소년","소속","소회","스타","승부차기","시각","시몬","시작","신구","실리","쐐기","아무","아시아","아카데미","안면","알짜","압축","양보","역대","연패","예비","오전","오토바이","완승","우승컵","운영사","월요일","이날","이달","이바지","이벤트","이적료","이하","이후","인생","인터뷰","일요일","입성","입장","자신","자정","자책골","장식","점수","점포","정상","제외","제한","조국","주심","주인","준결승","착용","초대석","최고","최근","최종","추가","취재진","코르","콜로","쾌거","크로아티아","타이기록","탈출","특별","티움","파워","페널티","표정","프로축구","한편","할인점","협회","황제","효용"],"freq":[7,7,5,5,5,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"fontFamily":"NanumSquare","fontWeight":"bold","color":"random-dark","minSize":0,"weightFactor":25.7142857142857,"backgroundColor":"white","gridSize":0,"minRotation":-0.785398163397448,"maxRotation":0.785398163397448,"shuffle":true,"rotateRatio":0.4,"shape":"circle","ellipticity":0.65,"figBase64":null,"hover":null},"evals":[],"jsHooks":{"render":[{"code":"function(el,x){\n                        console.log(123);\n                        if(!iii){\n                          window.location.reload();\n                          iii = False;\n\n                        }\n  }","data":null}]}}</script>
</div>
<h2 id="topic-분석">Topic 분석</h2>
<p>기사의 TF 기반의 DTM으로 Topic 분석을 수행합니다.</p>
<h3 id="희박-단어의-제거-1">희박 단어의 제거</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>compact_tf</span> <span class='op'>&lt;-</span> <span class='fu'>tm</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/tm/man/removeSparseTerms.html'>removeSparseTerms</a></span><span class='op'>(</span><span class='va'>dtm_tf</span>, sparse <span class='op'>=</span> <span class='fl'>0.98</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>compact_tf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 1000  177</code></pre>
</div>
<h3 id="otf-계산">OTF 계산</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>otf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='va'>compact_tf</span>, <span class='fl'>2</span>, <span class='va'>sum</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/arules/man/sort.html'>sort</a></span><span class='op'>(</span>decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="불용어-제거-1">불용어 제거</h3>
<p>Overall Term Frequency 상위 15개 단어를 불용어로 간주하여
제거합니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>stop_word</span> <span class='op'>&lt;-</span> <span class='va'>otf</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>20</span><span class='op'>]</span>
<span class='va'>stop_word</span>
</code></pre>
</div>
<pre><code> [1] &quot;월드컵&quot;     &quot;카타르&quot;     &quot;프랑스&quot;     &quot;일&quot;         &quot;팀&quot;        
 [6] &quot;한국&quot;       &quot;모로코&quot;     &quot;결승&quot;       &quot;축구&quot;       &quot;년&quot;        
[11] &quot;시간&quot;       &quot;우승&quot;       &quot;아르헨티나&quot; &quot;대표&quot;       &quot;메시&quot;      
[16] &quot;진출&quot;       &quot;준결승전&quot;   &quot;강&quot;         &quot;선수&quot;       &quot;번&quot;        </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>compact_tf2</span> <span class='op'>&lt;-</span> <span class='va'>compact_tf</span><span class='op'>[</span>, <span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>compact_tf</span><span class='op'>)</span> <span class='op'><a href='https://rdrr.io/pkg/arules/man/match.html'>%in%</a></span> <span class='va'>stop_word</span><span class='op'>]</span> 
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>compact_tf2</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 1000  157</code></pre>
</div>
<h3 id="불용어-제거-2">불용어 제거</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>compact_tf2</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='va'>sum</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code>          명       오현규         기자       결승전         강전 
          43          140           78          189           94 
          만         이번         유럽         대회         현지 
         122          102           59          179           70 
      김민재           전         심판         주심         경기 
          46          135           50           50          134 
        예비           분     포르투갈           바           페 
          72          118           34           89           89 
          뒤         국가         감독       챔피언           월 
          38          143          110           60           60 
      손흥민         벤투           수           후         차례 
          94           40           93           44           50 
        사상       루사일           것         방송         매체 
          50           80           88           38           40 
        활약       브라질   에르난데스           골   크로아티아 
          50           40           70           92           34 
        미국       준결승           때       러시아       특파원 
          50           32           31          128           21 
          저         주장         협회         동료         리그 
          32           32           22           29           49 
      마지막     생제르맹         파리         영국         좌절 
          80           26           52           37           24 
          중         출전       맞대결           시         시각 
          29           44           61           80           42 
        역대 카타르월드컵 국제축구연맹         성사           위 
          55          193          131           55           36 
        조국       베이트     스타디움         승리       알코르 
          26           27          167          113          137 
        오전           말         부상         새벽         소속 
          27           24           38           38           46 
        투혼           간         관심         대결         돌풍 
          28           29           29           39           60 
        디펜           딩         남미         개막         멤버 
          50           50           30           30           30 
        수원       토트넘       바이트           알         연속 
          50           30          100          100           60 
          점         쾌거         계단         통산         소식 
          30           30           67           77           30 
        이하         사망           세         소년           대 
          50           35           30           26           50 
        도전         연패           이         역사         뉴스 
          71           40           70           60           30 
    이탈리아         이후         기사         내용         요약 
          29           40           21           31           21 
        후보           그           등         마음         번호 
          30           30           70           30           60 
      인터뷰         투호         공격         전반           회 
          50           30           21           80           40 
        처음   뉴스데스크     대한민국           뒷         삼성 
          30           40           30           50           40 
      엔트리       이야기         최종           니         무아 
          50           40           40           30           30 
      선제골         쐐기           콜           테         후반 
          60           30           30           50           40 
        데샹         디디       리오넬       킬리안         무대 
          30           30           84           30           60 
          팬         달성         여자         도움         세계 
          41           30           30           24           40 
        스타       경기장       공격수         공식       가운데 
          21           40           30           40           25 
        사진 러시아월드컵           신       아시아         자신 
          27           30           30           28           40 
        생애           꿈 
          23           30 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'>"topicmodels"</span><span class='op'>)</span>

<span class='va'>k</span> <span class='op'>&lt;-</span> <span class='fl'>2</span><span class='op'>:</span><span class='fl'>10</span>

<span class='va'>models</span> <span class='op'>&lt;-</span> <span class='va'>k</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map</a></span><span class='op'>(</span>
    <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span>
      <span class='fu'>topicmodels</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/topicmodels/man/lda.html'>LDA</a></span><span class='op'>(</span><span class='va'>compact_tf2</span>, k <span class='op'>=</span> <span class='va'>x</span>, control <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>seed <span class='op'>=</span> <span class='fl'>123</span><span class='op'>)</span><span class='op'>)</span>
    <span class='op'>}</span>
  <span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="topic-개수-구하기">Topic 개수 구하기</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># LOG-LIKELIHOOD</span>
<span class='va'>log_ikelihood</span> <span class='op'>&lt;-</span> <span class='va'>models</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map_dbl</a></span><span class='op'>(</span><span class='va'>logLik</span><span class='op'>)</span>
<span class='va'>log_ikelihood</span>
</code></pre>
</div>
<pre><code>[1] -41873.69 -38543.03 -37632.98 -37383.98 -36929.48 -36374.93
[7] -35716.27 -35545.06 -35318.04</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/which.min.html'>which.max</a></span><span class='op'>(</span><span class='va'>log_ikelihood</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 9</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#ALPHA</span>
<span class='va'>alpha</span> <span class='op'>&lt;-</span> <span class='va'>models</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map_dbl</a></span><span class='op'>(</span><span class='va'>slot</span>, <span class='st'>"alpha"</span><span class='op'>)</span>
<span class='va'>alpha</span>
</code></pre>
</div>
<pre><code>[1] 38.62717433  0.09819337  0.09802429  0.10374254  0.10293525
[6]  0.08909183  0.07118032  0.07680259  0.07187277</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/which.min.html'>which.min</a></span><span class='op'>(</span><span class='va'>alpha</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 7</code></pre>
</div>
<h3 id="top-beta-단어의-시각화">Top beta 단어의 시각화</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>prob</span> <span class='op'>&lt;-</span> <span class='fu'>tidytext</span><span class='fu'>::</span><span class='fu'><a href='https://generics.r-lib.org/reference/tidy.html'>tidy</a></span><span class='op'>(</span><span class='va'>models</span><span class='op'>[[</span><span class='fl'>9</span><span class='op'>]</span><span class='op'>]</span>, matrix <span class='op'>=</span> <span class='st'>"beta"</span><span class='op'>)</span>
<span class='va'>prob</span>
</code></pre>
</div>
<pre><code># A tibble: 1,570 × 3
   topic term       beta
   &lt;int&gt; &lt;chr&gt;     &lt;dbl&gt;
 1     1 명    1.12e-138
 2     2 명    5.90e-  2
 3     3 명    3.64e- 32
 4     4 명    2.27e- 26
 5     5 명    3.24e- 77
 6     6 명    4.58e- 39
 7     7 명    8.53e- 31
 8     8 명    3.19e-191
 9     9 명    2.96e- 62
10    10 명    2.77e- 43
# … with 1,560 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>top_prob</span> <span class='op'>&lt;-</span> <span class='va'>prob</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>topic</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/top_n.html'>top_n</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='va'>beta</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='va'>topic</span>, <span class='op'>-</span><span class='va'>beta</span><span class='op'>)</span>
<span class='va'>top_prob</span>
</code></pre>
</div>
<pre><code># A tibble: 102 × 3
   topic term         beta
   &lt;int&gt; &lt;chr&gt;       &lt;dbl&gt;
 1     1 분         0.154 
 2     1 전반       0.104 
 3     1 에르난데스 0.0913
 4     1 선제골     0.0782
 5     1 러시아     0.0665
 6     1 테         0.0652
 7     1 이         0.0652
 8     1 승리       0.0650
 9     1 후반       0.0522
10     1 골         0.0415
# … with 92 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>top_prob</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>term <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/reorder.factor.html'>reorder</a></span><span class='op'>(</span><span class='va'>term</span>, <span class='va'>beta</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>term</span>,  y <span class='op'>=</span> <span class='va'>beta</span>, fill <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>topic</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_col</a></span><span class='op'>(</span>show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>topic</span>, scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="classifier_bert_files/figure-html5/unnamed-chunk-107-1.png" width="1152" style="display: block; margin: auto;" /></p>
</div>
<h3 id="문서에서의-토픽의-비중">문서에서의 토픽의 비중</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>news_gamma</span> <span class='op'>&lt;-</span> <span class='fu'>tidytext</span><span class='fu'>::</span><span class='fu'><a href='https://generics.r-lib.org/reference/tidy.html'>tidy</a></span><span class='op'>(</span><span class='va'>models</span><span class='op'>[[</span><span class='fl'>9</span><span class='op'>]</span><span class='op'>]</span>, matrix <span class='op'>=</span> <span class='st'>"gamma"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>gamma <span class='op'>=</span> <span class='va'>gamma</span> <span class='op'>*</span> <span class='fl'>100</span><span class='op'>)</span>

<span class='va'>news_gamma</span>
</code></pre>
</div>
<pre><code># A tibble: 10,000 × 3
   document topic gamma
   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;
 1 75           1  1.93
 2 174          1  1.93
 3 273          1  1.93
 4 372          1  1.93
 5 471          1  1.93
 6 570          1  1.93
 7 669          1  1.93
 8 768          1  1.93
 9 867          1  1.93
10 966          1  1.93
# … with 9,990 more rows</code></pre>
</div>
<h3 id="토픽이-포함된-문서-조회">토픽이 포함된 문서 조회</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#토픽1의 주요 단어</span>
<span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>models</span><span class='op'>[[</span><span class='fl'>9</span><span class='op'>]</span><span class='op'>]</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code> [1] &quot;분&quot;         &quot;전반&quot;       &quot;에르난데스&quot; &quot;선제골&quot;     &quot;러시아&quot;    
 [6] &quot;테&quot;         &quot;이&quot;         &quot;승리&quot;       &quot;후반&quot;       &quot;골&quot;        </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#토픽 1이 95% 이상 포함된 문서 조회</span>
<span class='va'>news_gamma</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>topic</span> <span class='op'>==</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>gamma</span> <span class='op'>&gt;=</span> <span class='fl'>95</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/desc.html'>desc</a></span><span class='op'>(</span><span class='va'>gamma</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 30 × 3
   document topic gamma
   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;
 1 33           1  96.1
 2 132          1  96.1
 3 231          1  96.1
 4 330          1  96.1
 5 429          1  96.1
 6 529          1  96.1
 7 628          1  96.1
 8 727          1  96.1
 9 826          1  96.1
10 925          1  96.1
# … with 20 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># 61번째 기사의 이해</span>
<span class='va'>news_worldcup_sim</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>id</span> <span class='op'><a href='https://rdrr.io/pkg/arules/man/match.html'>%in%</a></span> <span class='st'>"61"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>title_text</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/pull.html'>pull</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;월드컵 축구 대표팀 기념관 된 대통령실 로비&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>news_worldcup_sim</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>id</span> <span class='op'><a href='https://rdrr.io/pkg/arules/man/match.html'>%in%</a></span> <span class='st'>"61"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>description_text</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/pull.html'>pull</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;대통령실이 최근 카타르월드컵에서 16강 진출을 이룬 축구 국가대표팀이 윤석열 대통령에게 선물한... 대통령실은 13일 1층 로비에 대표팀 선수들의 사인이 담긴 대형 사진과 대표팀 주장인 손흥민 선수가 월드컵 16강... &quot;</code></pre>
</div>
<h3 id="문서의-토픽-분해">문서의 토픽 분해</h3>
<p>모든 문서는 토픽들의 복합체입니다. 기사 1을 분해하여 토픽의 비율을
조해해 봅니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>news_gamma</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>document</span> <span class='op'><a href='https://rdrr.io/pkg/arules/man/match.html'>%in%</a></span> <span class='st'>"1"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/desc.html'>desc</a></span><span class='op'>(</span><span class='va'>gamma</span><span class='op'>)</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code># A tibble: 10 × 3
   document topic  gamma
   &lt;chr&gt;    &lt;int&gt;  &lt;dbl&gt;
 1 1            2 34.7  
 2 1            5 17.7  
 3 1           10 17.7  
 4 1            7  9.17 
 5 1            3  9.15 
 6 1            1  9.14 
 7 1            9  0.613
 8 1            4  0.613
 9 1            6  0.613
10 1            8  0.613</code></pre>
</div>
<h3 id="토픽의-단어-분해">토픽의 단어 분해</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>top_prob</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>topic</span> <span class='op'>==</span> <span class='fl'>6</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/desc.html'>desc</a></span><span class='op'>(</span><span class='va'>beta</span><span class='op'>)</span><span class='op'>)</span>  
</code></pre>
</div>
<pre><code># A tibble: 10 × 3
   topic term         beta
   &lt;int&gt; &lt;chr&gt;       &lt;dbl&gt;
 1     6 오현규     0.150 
 2     6 예비       0.0772
 3     6 등         0.0644
 4     6 번호       0.0644
 5     6 수원       0.0536
 6     6 인터뷰     0.0536
 7     6 뒷         0.0536
 8     6 뉴스데스크 0.0429
 9     6 삼성       0.0429
10     6 이야기     0.0429</code></pre>
</div>
<h2 id="이진분류-모형">이진분류 모형</h2>
<h3 id="패키지-로드하기">패키지 로드하기</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidymodels.tidymodels.org'>tidymodels</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://text2vec.org'>text2vec</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://glmnet.stanford.edu'>glmnet</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/topepo/caret/'>caret</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>bitTA</span><span class='op'>)</span>  
</code></pre>
</div>
</div>
<h3 id="파생변수-만들기">파생변수 만들기</h3>
<ul>
<li>연합뉴스 여부
<ul>
<li>연합뉴스 기사: 1</li>
<li>기타 뉴스기사: 0</li>
</ul></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>news_worldcup_yna</span> <span class='op'>&lt;-</span> <span class='va'>news_worldcup_sim</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>yna_flag <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'>stringr</span><span class='fu'>::</span><span class='fu'><a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect</a></span><span class='op'>(</span><span class='va'>originallink</span>, <span class='st'>"www.yna.co.kr"</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>news_worldcup_yna</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>yna_flag</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>ratio <span class='op'>=</span> <span class='va'>n</span> <span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>100</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>  yna_flag   n ratio
1        0 809  80.9
2        1 191  19.1</code></pre>
</div>
<h3 id="불균형-데이터의-언더-샘플링">불균형 데이터의 언더 샘플링</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>n_yna</span> <span class='op'>&lt;-</span> <span class='va'>news_worldcup_yna</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>yna_flag</span> <span class='op'>==</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>tally</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/pull.html'>pull</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>n_not_yna</span> <span class='op'>&lt;-</span> <span class='va'>news_worldcup_yna</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>yna_flag</span> <span class='op'>==</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>tally</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/pull.html'>pull</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>123</span><span class='op'>)</span>
<span class='va'>idx_sample</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/arules/man/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='va'>n_not_yna</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='va'>n_yna</span><span class='op'>)</span>

<span class='va'>subset_not_yna</span> <span class='op'>&lt;-</span> <span class='va'>news_worldcup_yna</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>yna_flag</span> <span class='op'>==</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/ranking.html'>row_number</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://rdrr.io/pkg/arules/man/match.html'>%in%</a></span> <span class='va'>idx_sample</span><span class='op'>)</span>

<span class='va'>subset_yna</span> <span class='op'>&lt;-</span> <span class='va'>news_worldcup_yna</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>yna_flag</span> <span class='op'>==</span> <span class='fl'>1</span><span class='op'>)</span>

<span class='va'>news_sample_yna</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/bind.html'>bind_rows</a></span><span class='op'>(</span><span class='va'>subset_not_yna</span>, <span class='va'>subset_yna</span><span class='op'>)</span>

<span class='va'>news_sample_yna</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>yna_flag</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code>  yna_flag   n
1        0 191
2        1 191</code></pre>
</div>
<h3 id="데이터셋-분리">데이터셋 분리</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>123</span><span class='op'>)</span>
<span class='va'>news_split</span> <span class='op'>&lt;-</span> <span class='fu'>initial_split</span><span class='op'>(</span><span class='va'>news_sample_yna</span>, strata <span class='op'>=</span> <span class='va'>yna_flag</span><span class='op'>)</span>

<span class='va'>train</span> <span class='op'>&lt;-</span> <span class='fu'>rsample</span><span class='fu'>::</span><span class='fu'><a href='https://rsample.tidymodels.org/reference/initial_split.html'>training</a></span><span class='op'>(</span><span class='va'>news_split</span><span class='op'>)</span>
<span class='va'>test</span> <span class='op'>&lt;-</span> <span class='fu'>rsample</span><span class='fu'>::</span><span class='fu'><a href='https://rsample.tidymodels.org/reference/initial_split.html'>testing</a></span><span class='op'>(</span><span class='va'>news_split</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>train</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 286   9</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>test</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 96  9</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>train</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>yna_flag</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>  yna_flag   n
1        0 143
2        1 143</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>test</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>yna_flag</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>  yna_flag  n
1        0 48
2        1 48</code></pre>
</div>
<h3 id="tokenize-반복기-정의">tokenize 반복기 정의</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># 일반명사 단위로 토큰을 생성</span>
<span class='va'>token_fun</span> <span class='op'>&lt;-</span> <span class='fu'>bitTA</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/bitTA/man/morpho_mecab.html'>morpho_mecab</a></span>

<span class='va'>it_train</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/text2vec/man/itoken.html'>itoken_parallel</a></span><span class='op'>(</span><span class='va'>train</span><span class='op'>$</span><span class='va'>description_text</span>, 
                   tokenizer <span class='op'>=</span> <span class='va'>token_fun</span>, 
                   ids <span class='op'>=</span> <span class='va'>train</span><span class='op'>$</span><span class='va'>id</span>, 
                   progressbar <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='va'>it_test</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/text2vec/man/itoken.html'>itoken_parallel</a></span><span class='op'>(</span><span class='va'>test</span><span class='op'>$</span><span class='va'>description_text</span>, 
                  tokenizer <span class='op'>=</span> <span class='va'>token_fun</span>, 
                  ids <span class='op'>=</span> <span class='va'>test</span><span class='op'>$</span><span class='va'>id</span>, 
                  progressbar <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="frequency-기반의-dtm-생성">Frequency 기반의 DTM 생성</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># VOCABULARY 생성</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/RevolutionAnalytics/doparallel'>doParallel</a></span><span class='op'>)</span>

<span class='va'>nc</span> <span class='op'>&lt;-</span> <span class='fu'>parallel</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/parallel/detectCores.html'>detectCores</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/doParallel/man/registerDoParallel.html'>registerDoParallel</a></span><span class='op'>(</span>cores <span class='op'>=</span> <span class='va'>nc</span><span class='op'>)</span>

<span class='va'>vocab</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/text2vec/man/create_vocabulary.html'>create_vocabulary</a></span><span class='op'>(</span><span class='va'>it_train</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span><span class='op'>(</span><span class='va'>vocab</span>, n <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Number of docs: 286 
0 stopwords:  ... 
ngram_min = 1; ngram_max = 1 
Vocabulary: 
          term term_count doc_count
 1: 아르헨티나         91        76
 2:       우승         92        72
 3:       축구         92        89
 4:         팀        103        83
 5:       시간        122       119
 6:       결승        123       105
 7:     모로코        137        95
 8:     프랑스        264       156
 9:     카타르        300       212
10:     월드컵        563       280</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># DOCUMENT TERM MATRIX 생성하기</span>
<span class='va'>vectorizer</span> <span class='op'>&lt;-</span>  <span class='fu'><a href='https://rdrr.io/pkg/text2vec/man/vectorizers.html'>vocab_vectorizer</a></span><span class='op'>(</span><span class='va'>vocab</span><span class='op'>)</span>

<span class='va'>dtm_train_tf</span> <span class='op'>&lt;-</span> <span class='fu'>text2vec</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/text2vec/man/create_dtm.html'>create_dtm</a></span><span class='op'>(</span><span class='va'>it_train</span>, <span class='va'>vectorizer</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>dtm_train_tf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 286 511</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dtm_test_tf</span> <span class='op'>&lt;-</span> <span class='fu'>text2vec</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/text2vec/man/create_dtm.html'>create_dtm</a></span><span class='op'>(</span><span class='va'>it_test</span>, <span class='va'>vectorizer</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>dtm_test_tf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1]  96 511</code></pre>
</div>
<h3 id="n-grams-기반의-dtm-생성">N-Grams 기반의 DTM 생성</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># VOCABULARY 생성</span>
<span class='va'>vocab_bigram</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/text2vec/man/create_vocabulary.html'>create_vocabulary</a></span><span class='op'>(</span><span class='va'>it_train</span>, ngram <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/arules/man/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1L</span>, <span class='fl'>2L</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>vocab_bigram</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 1639    3</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># PRUNE VOCABULARY</span>
<span class='va'>vocab_bigram</span> <span class='op'>&lt;-</span> <span class='va'>vocab_bigram</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/text2vec/man/prune_vocabulary.html'>prune_vocabulary</a></span><span class='op'>(</span>term_count_min <span class='op'>=</span> <span class='fl'>10</span>,
                   doc_proportion_max <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>vocab_bigram</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 167   3</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># DOCUMENTS TERM MATRIX 생성</span>
<span class='va'>vectorizer_bigram</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/text2vec/man/vectorizers.html'>vocab_vectorizer</a></span><span class='op'>(</span><span class='va'>vocab_bigram</span><span class='op'>)</span>

<span class='va'>dtm_train_bigram</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/text2vec/man/create_dtm.html'>create_dtm</a></span><span class='op'>(</span><span class='va'>it_train</span>, <span class='va'>vectorizer_bigram</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>dtm_train_bigram</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 286 167</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dtm_test_bigram</span>  <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/text2vec/man/create_dtm.html'>create_dtm</a></span><span class='op'>(</span><span class='va'>it_test</span>, <span class='va'>vectorizer_bigram</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>dtm_test_bigram</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1]  96 167</code></pre>
</div>
<h3 id="tf-idf-기반의-dtm-생성">TF-IDF 기반의 DTM 생성</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tfidf</span> <span class='op'>&lt;-</span> <span class='va'><a href='https://rdrr.io/pkg/text2vec/man/TfIdf.html'>TfIdf</a></span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>dtm_train_tfidf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/mlapi/man/fit_transform.html'>fit_transform</a></span><span class='op'>(</span><span class='va'>dtm_train_tf</span>, <span class='va'>tfidf</span><span class='op'>)</span>
<span class='va'>dtm_test_tfidf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/mlapi/man/fit_transform.html'>fit_transform</a></span><span class='op'>(</span><span class='va'>dtm_test_tf</span>, <span class='va'>tfidf</span><span class='op'>)</span> 
</code></pre>
</div>
</div>
<h3 id="dtm의-크기-비교">DTM의 크기 비교</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>dtm_train_tf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 286 511</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>dtm_train_bigram</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 286 167</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>dtm_train_tfidf</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code>[1] 286 511</code></pre>
</div>
<h3 id="frequency-기반-모델링">Frequency 기반 모델링</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>NFOLDS</span> <span class='op'>&lt;-</span> <span class='fl'>10</span>

<span class='va'>classifier_tf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://glmnet.stanford.edu/reference/cv.glmnet.html'>cv.glmnet</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>dtm_train_tf</span>, y <span class='op'>=</span> <span class='va'>train</span><span class='op'>$</span><span class='va'>yna_flag</span>, 
                           family <span class='op'>=</span> <span class='st'>"binomial"</span>,
                           alpha <span class='op'>=</span> <span class='fl'>1</span>,
                           parallel <span class='op'>=</span> <span class='cn'>TRUE</span>, 
                           keep <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> 
</code></pre>
</div>
</div>
<h3 id="모델의-이해">모델의 이해</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://broom.tidymodels.org/'>broom</a></span><span class='op'>)</span>

<span class='va'>coefs_tf</span> <span class='op'>&lt;-</span> <span class='va'>classifier_tf</span><span class='op'>$</span><span class='va'>glmnet.fit</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://generics.r-lib.org/reference/tidy.html'>tidy</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>lambda</span> <span class='op'>==</span> <span class='va'>classifier_tf</span><span class='op'>$</span><span class='va'>lambda.1se</span><span class='op'>)</span>
<span class='va'>coefs_tf</span> 
</code></pre>
</div>
<pre><code># A tibble: 83 × 5
   term         step  estimate  lambda dev.ratio
   &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
 1 (Intercept)    74 -2.57e+ 0 0.00686     0.937
 2 감동           74 -1.25e+ 0 0.00686     0.937
 3 결국           74 -1.00e- 1 0.00686     0.937
 4 관중석         74 -9.92e- 1 0.00686     0.937
 5 류             74 -1.20e- 2 0.00686     0.937
 6 예고           74 -1.15e- 2 0.00686     0.937
 7 예지           74 -3.45e-15 0.00686     0.937
 8 툽             74 -1.19e- 1 0.00686     0.937
 9 포착           74 -1.61e- 2 0.00686     0.937
10 현재           74 -3.27e- 3 0.00686     0.937
# … with 73 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>coefs_tf</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>estimate</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/top_n.html'>top_n</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='va'>estimate</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_reorder.html'>fct_reorder</a></span><span class='op'>(</span><span class='va'>term</span>, <span class='va'>estimate</span><span class='op'>)</span>, <span class='va'>estimate</span>, fill <span class='op'>=</span> <span class='va'>estimate</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_col</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.8</span>, show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>
    x <span class='op'>=</span> <span class='cn'>NULL</span>,
    title <span class='op'>=</span> <span class='st'>"예측에 영향을 주는 모델의 계수들 with TF"</span>,
    subtitle <span class='op'>=</span> <span class='st'>"네이버 월드컵 관련 뉴스"</span>
  <span class='op'>)</span>
</code></pre>
</div>
<p><img src="classifier_bert_files/figure-html5/unnamed-chunk-122-1.png" width="1152" style="display: block; margin: auto;" /></p>
</div>
<h3 id="모델의-평가">모델의 평가</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># 정오분류행렬</span>
<span class='va'>news_tf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/arules/man/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>classifier_tf</span>, <span class='va'>dtm_test_tf</span>, type <span class='op'>=</span> <span class='st'>'class'</span><span class='op'>)</span>
<span class='va'>cm_tf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/caret/man/confusionMatrix.html'>confusionMatrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>test</span><span class='op'>$</span><span class='va'>yna_flag</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>news_tf</span><span class='op'>)</span>, positive <span class='op'>=</span> <span class='st'>"1"</span><span class='op'>)</span>
<span class='va'>cm_tf</span>
</code></pre>
</div>
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction  0  1
         0 46  2
         1  0 48
                                          
               Accuracy : 0.9792          
                 95% CI : (0.9268, 0.9975)
    No Information Rate : 0.5208          
    P-Value [Acc &gt; NIR] : &lt;2e-16          
                                          
                  Kappa : 0.9583          
                                          
 Mcnemar&#39;s Test P-Value : 0.4795          
                                          
            Sensitivity : 0.9600          
            Specificity : 1.0000          
         Pos Pred Value : 1.0000          
         Neg Pred Value : 0.9583          
             Prevalence : 0.5208          
         Detection Rate : 0.5000          
   Detection Prevalence : 0.5000          
      Balanced Accuracy : 0.9800          
                                          
       &#39;Positive&#39; Class : 1               
                                          </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># ROC 커브</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='http://expasy.org/tools/pROC/'>"pROC"</a></span><span class='op'>)</span>

<span class='va'>predictions</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/arules/man/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>classifier_tf</span>, <span class='va'>dtm_test_tf</span>, type <span class='op'>=</span> <span class='st'>'response'</span><span class='op'>)</span>
<span class='va'>roc_tf</span> <span class='op'>&lt;-</span> <span class='fu'>pROC</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/pROC/man/roc.html'>roc</a></span><span class='op'>(</span><span class='va'>test</span><span class='op'>$</span><span class='va'>yna_flag</span>, <span class='va'>predictions</span><span class='op'>)</span>

<span class='fu'>pROC</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/pROC/man/auc.html'>auc</a></span><span class='op'>(</span><span class='va'>roc_tf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Area under the curve: 1</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/pROC/man/plot.roc.html'>plot</a></span><span class='op'>(</span><span class='va'>roc_tf</span><span class='op'>)</span>
</code></pre>
</div>
<img src="classifier_bert_files/figure-html5/unnamed-chunk-123-1.png" width="1152" style="display: block; margin: auto;" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>idx</span> <span class='op'>&lt;-</span> <span class='va'>predictions</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/base/which.min.html'>which.max</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>predictions</span><span class='op'>[</span><span class='va'>idx</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] 0.9832928</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>test</span><span class='op'>[</span><span class='va'>idx</span>, <span class='st'>"description_text"</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] &quot;카타르 월드컵 준결승전에서 프랑스를 상대로 잘 싸웠지만 아쉽게 졌다며 패배 소식을 보도했다. 현지 영문 일간 월드뉴스는 14일(현지시간) 프랑스전에서 눈부신 경기력을 보여줬지만, 모로코의 영광스러운 월드컵... &quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>idx</span> <span class='op'>&lt;-</span> <span class='va'>predictions</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/base/which.min.html'>which.min</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>predictions</span><span class='op'>[</span><span class='va'>idx</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] 0.001861351</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>test</span><span class='op'>[</span><span class='va'>idx</span>, <span class='st'>"description_text"</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] &quot;아르헨티나는 14일(한국시각) 카타르 루사일의 루사일스타디움에서 열린 2022 카타르월드컵 4강전에서... 아르헨티나 축구 역사상 여섯 번째 월드컵 결승이다. 독일(8회)에 이어 역대 2위. 메시를 향한 마음으로 똘똘 뭉친... &quot;</code></pre>
</div>
<div class="sourceCode" id="cb60"><pre
class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<div class="distill-site-nav distill-site-footer">
© Copyright 2022 bitR.
<br>
Create by 한국 R 사용자회</a>
</div>

<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
